<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíå‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á P + T</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@300;400;600&family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        <header>
            <h1><i class="fa-solid fa-book-open"></i> ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h1>
            <div class="controls" style="display: flex;"> 
                <button id="themeToggleBtn" class="btn-secondary" title="Switch Theme">
                    <i class="fa-solid fa-moon"></i>
                </button>
                <button id="todayBtn" class="btn-secondary">
                    <i class="fa-solid fa-calendar-day"></i> Today
                </button>
            </div>
        </header>

        <div id="memorySection" class="memory-section" style="display: none;">
            <div class="memory-header-row">
                <h3><i class="fa-solid fa-clock-rotate-left"></i> ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô... <span id="memDateDisplay"></span></h3>
                <button id="shuffleMemBtn" class="btn-secondary" title="‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà"><i class="fa-solid fa-shuffle"></i></button>
            </div>
            
            <div class="memory-card">
                <div class="mem-person person-a">
                    <div class="mem-tag"> <img src="images/fox.png" style="width: 20px; height: 20px;"> ‡πÇ‡∏õ‡∏£‡∏î</div>
                    <p id="memTextA"></p>
                    <div id="memImgsA" class="mem-imgs-grid"></div>
                </div>

                <div class="mem-person person-b">
                    <div class="mem-tag"> <img src="images/penguin.png" style="width: 20px; height: 20px;"> ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ï‡∏∑‡πâ‡∏≠‡∏á</div>
                    <p id="memTextB"></p>
                    <div id="memImgsB" class="mem-imgs-grid"></div>
                </div>
            </div>
        </div>

        <div class="calendar-nav">
            <button id="prevBtn"><i class="fa-solid fa-chevron-left"></i></button>
            
            <div class="nav-selectors">
                <select id="monthSelect"></select>
                <select id="yearSelect"></select>
            </div>

            <button id="nextBtn"><i class="fa-solid fa-chevron-right"></i></button>
        </div>

        <div class="calendar-grid" id="calendar"></div>
    </div>

    <div class="modal" id="entryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="selectedDateDisplay">Date</h3>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            
            <div class="diary-split">
                <div class="person-section person-a">
                    <div class="person-header">
                        <i class="fa-regular fa-chess-king"></i> <span>‡πÇ‡∏õ‡∏£‡∏î</span>
                    </div>
                    <textarea id="textA" placeholder="How was your day, Prod?"></textarea>
                    <div class="image-upload">
                        <label for="imgInputA"><i class="fa-solid fa-images"></i> Add Images</label>
                        <input type="file" id="imgInputA" accept="image/*" multiple hidden>
                        <div class="masonry-grid" id="previewA"></div>
                    </div>
                </div>

                <div class="person-section person-b">
                    <div class="person-header">
                       <i class="fa-regular fa-chess-queen"></i> <span>‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ï‡∏∑‡πâ‡∏≠‡∏á</span>
                    </div>
                    <textarea id="textB" placeholder="What's on your mind, Turng?"></textarea>
                    <div class="image-upload">
                        <label for="imgInputB"><i class="fa-solid fa-images"></i> Add Images</label>
                        <input type="file" id="imgInputB" accept="image/*" multiple hidden>
                        <div class="masonry-grid" id="previewB"></div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="deleteBtn" class="btn-danger">
                    <i class="fa-solid fa-trash"></i> ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                </button>
                <button id="saveBtn" class="btn-primary"><i class="fa-regular fa-floppy-disk"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>
    

    <script type="module">
        // Import the functions you need from the SDKs you need
       import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

        // TODO: Replace the following with YOUR app's Firebase project configuration
        // (Copy this object from the Firebase Console -> Project Settings)
       const firebaseConfig = {
            apiKey: "AIzaSyDJjP28ZAWvD0Ev4gTJPpP3TpG1WA_ZecE",
            authDomain: "our-journal-ffcb8.firebaseapp.com",
            databaseURL: "https://our-journal-ffcb8-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "our-journal-ffcb8",
            storageBucket: "our-journal-ffcb8.firebasestorage.app",
            messagingSenderId: "862331165540",
            appId: "1:862331165540:web:c507da1a6cbf3ef5263871"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Make db functions available to your app.js logic
        window.db = db;
        window.dbRef = ref;
        window.dbSet = set;
        window.dbOnValue = onValue;
        
        // Dispatch event to let app.js know Firebase is ready
        window.dispatchEvent(new Event('firebase-ready'));
    </script>
    <script src="app.js"></script>
    
</body>
</html>